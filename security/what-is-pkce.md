# What Is PKCE

__Category: Security__

Proof Key for Code Exchange (PKCE) pronouncd "pixy" is an extension to the Authorization Code grant type and should be used for mobile apps or apps that run on a public client. PKCE provides dynamic client secrets which means client secrets for an app can stay secret even when a back end is not used.

PKCE works by substituting the client secret with a string that is dynamically generated, allowing the authorization server to verify that the app requesting the access token is the same one that initiated the OAuth flow.

Additional values used as part of PKCE are:

* `code_verifier` - a cryptographically random string generated by an app (this should be a high-entropy cryptographic random string with a minimum of 43 characters and a maximum of 128 characters)
* `code_challenge` - a base 64 encoding of a SHA256 hash made with the client_verifier
* `code_challenge_method` - informs the server which function was used to transform the code_verifier and can be either "plain" or "S256" (defaults to plain if not supplied)

Both the `code_challenge` and `code_challenge_method` are passed to the authorization server. For example:

```shell
https://www.orbiks.com/oauth2/authorize?client_id=owdjktek8mg5ren&response_type=code&code_challenge=lSEB3zK2TM-X38Baht80CvC4E_a5DnpCG52y5a7dQyk&code_challenge_method=S256
```

The auth server will respond with an authorization code. 

The authorization code and the code verifier values can subsequently be used to obtain an access token from the auth server. The client uses the access token to call server endpoints.

__Note:__ The code_verifier and the code_challenge should only be used once per token request cycle. Each time an authorization request is made, a new code challenge should be sent.
